#!/usr/bin/env python
from __future__ import print_function
import os
import numpy
from argparse import ArgumentParser
import reredux
import fitsio
import esutil as eu

parser = ArgumentParser()

parser.add_argument('run', help='run to use in fit')

parser.add_argument('--show',action='store_true',help='show plot')
parser.add_argument('--weights',action='store_true',help='use weights')

parser.add_argument('--yrange', help="yrange of plot")
parser.add_argument('--xrange', help="xrange of plot")


parser.add_argument('--fit-only',action='store_true',
                    help='get the means from the written file')

parser.add_argument('--cache',action='store_true',
                    help=('cache the file subset locally; use the cache '
                          'if available'))

def main():

    args = parser.parse_args()
    av=reredux.averaging.AveragerSimn(args.run,
                                      fit_only=args.fit_only,
                                      use_weights=args.weights,
                                      use_cache=args.cache)
    av.go()
    av.doplot(args)

main()
